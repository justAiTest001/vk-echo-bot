# VK Echo Bot

**VK Echo Bot** — это Spring Boot приложение на Java, которое принимает входящие сообщения через VK API и отправляет обратно эхо-сообщение, повторяя текст отправителя. 
В приложении также предусмотрено логирование. 

## Оглавление

- [Технологии](#технологии)
- [Конфигурация](#конфигурация)
- [Запуск](#запуск)
- [API-эндпоинты](#api-эндпоинты)
- [Тестирование](#тестирование)
- [Автор](#автор)

## Технологии

- **Java 21**
- **Spring Boot**
- **Docker и Docker Compose**
- **VK API** — для обработки сообщений через вебхуки

## Конфигурация

Для конфигурации создайте `.env` файл в корне проекта с параметрами:

```plaintext
VK_BOT_ACCESS_TOKEN=your_vk_bot_access_token
VK_CONFIRMATION_STRING=your_confirmation_string
VK_API_URL=https://api.vk.com/method
VK_API_VERSION=5.199
HOST_PORT=80
SERVER_PORT=8080
```

## Конфигурация

Основные настройки проекта находятся в файле `application.yml`, который можно изменить в зависимости от требований.

## Запуск
Для запуска приложения можно использовать Docker.

1. Соберите и запустите контейнер:

    ```bash
    docker-compose up --build
    ```

2. Все **переменные окружения** считываются из файла `.env`.

3. В настрокайх сервера VK выбрать Callback API и в поле «Адрес» написать `<ссылка>/webhook`:
     ```bash
    https://1234-5-67-891-011.ngrok-free.app/webhook
    ```

## Тестирование

Проект включает базовые юнит-тесты для основных функций:

    ./gradlew test

## API-Эндпоинты

Приложение предоставляет REST API для работы с VK Webhook.

- **POST** `/webhook`
    - **Описание**: Принимает входящие сообщения от VK и отвечает с эхо-сообщением.
    - **Тело запроса**:
        ```json
        {
            "type": "message_new",
            "object": {
                "peer_id": 123456789,
                "text": "Привет, бот!"
            }
        }
        ```
    - **Ответ**:
        - Успех: `{"message": "Вы сказали: Привет, бот!"}`
        - Ошибка: `{"error": "Описание ошибки"}`

## Автор

Баринов Николай — https://t.me/kochachi
